<link rel ="stylesheet" href = "{{ url_for('static', filename='css/AskQuery.css') }}">
{% extends "base_loggedin.html" %}

{% block title %}Ask a Question{% endblock %}

{% block content %}

<h1>Ask A question</h1>


<div class="container">
  
    

  <div class="container">
    
      
      <div class="card section-card shadow mb-4">
    <div class="card query-card w-100 mx-auto -card  shadow">
      
          <div class="card-body">
            <form id="ask-form" method="POST" action="/ask">
            <h3 class="card-title">Title</h3>
            <p class="card-text specific">Be specific and imagine you're asking a question to another person
              .</p>
            <input type="text" class="form-control  shadow " placeholder="Your T" id="QuesTitle" name="QuesTitle" required/>
          </div>
        </div>
      </div>
        
        <div class="card section-card shadow mb-4">
      <div class="card query-card w-100 mx-auto -card shadow">
        
            <div class="card-body">
              <h3 class="card-title">Problems and description</h3>
              <p class="card-text specific">Introduce the problem and expand on what you put in the title..</p>
              <input type="text" class="form-control  shadow input-height" placeholder="Your T" style="resize: none;" id="QuesDesc" name="QuesDesc" required/>
            </div>
          </div>
        </div>


        <div class="card section-card shadow mb-4">
          <div class="card query-card w-100 mx-auto -card shadow">
            <div class="card-body">
              <select name="QuesTags" id = "QuesTags" multiple>
                <option value="php">php</option>
                <option value="mysql">mysql</option>
            </select>
              <h3 class="card-title">Tags</h3>
              <p class="card-text specific">Add up to 5 tags to describe what your question is about. Start typing to see suggestions.</p>
              <div class="input-group">
                <select id="tagDropdown" class="form-control shadow">
                  <option value="" selected disabled hidden>Select a tag</option>
                  <option value="tag1">Tag 1</option>
                  <option value="tag2">Tag 2</option>
                  <option value="tag3">Tag 3</option>
                </select>
                <button id="addTagBtn" class="btn btn-primary">Add tag</button>
              </div>
              <div id="tagContainer"></div>
            </div>
          </div>
        </div>
            <button type="submit" class="btn btn-primary">POST</button>
        </form>
      </div> 









    <script>

    const tagDropdown = document.getElementById("tagDropdown");
const addTagBtn = document.getElementById("addTagBtn");
const tagContainer = document.getElementById("tagContainer");
const MAX_TAGS = 5;
let numTags = 0;

// Add tag to tag container
function addTag(tagName) {
  if (numTags < MAX_TAGS) {
    const tagDiv = document.createElement("div");
    tagDiv.classList.add("tag");
    tagDiv.innerText = tagName;
    
    const removeBtn = document.createElement("button");
    removeBtn.classList.add("btn", "btn-danger", "btn-sm");
    removeBtn.innerText = "X";
    removeBtn.addEventListener("click", () => {
      tagDiv.remove();
      tagDropdown.options.add(new Option(tagName, tagName));
      numTags--;
      addTagBtn.disabled = false;
    });
    
    tagDiv.appendChild(removeBtn);
    tagContainer.appendChild(tagDiv);
    tagDropdown.options[tagDropdown.selectedIndex].remove();
    numTags++;
    if (numTags == MAX_TAGS) {
      addTagBtn.disabled = true;
    }
  }
}

// Add tag when button is clicked
addTagBtn.addEventListener("click", () => {
  const selectedTag = tagDropdown.value;
  if (selectedTag !== "") {
    addTag(selectedTag);
  }
});

// Add tag when enter key is pressed
tagDropdown.addEventListener("keypress", (e) => {
  if (e.key === "Enter") {
    const selectedTag = tagDropdown.value;
    if (selectedTag !== "") {
      addTag(selectedTag);
    }
  }
});
</script>

{% endblock %}